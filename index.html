<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Newofa Language Generator</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#0f1220; color:#eaeaf0; margin:0; padding:20px; }
    h1 { margin-bottom:8px; }
    .hint { color:#aab; margin-bottom:16px; }
    .box { background:#161a33; border-radius:12px; padding:16px; margin-bottom:16px; box-shadow:0 10px 30px rgba(0,0,0,.25); }
    textarea, input { width:100%; background:#0c0f25; color:#eaeaf0; border:1px solid #2a2f66; border-radius:8px; padding:10px; }
    textarea { min-height:120px; resize:vertical; }
    button { background:#5b6cff; color:white; border:none; padding:10px 16px; border-radius:8px; cursor:pointer; }
    button:hover { opacity:.9; }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    .meaning { font-size:14px; color:#cfd3ff; margin-bottom:8px; }
    .tag { display:inline-block; padding:4px 8px; background:#22276b; border-radius:999px; font-size:12px; margin-right:6px; }
    pre { white-space:pre-wrap; word-break:break-word; background:#0b0e22; padding:12px; border-radius:8px; border:1px solid #2a2f66; }
  </style>
</head>
<body>
  <h1>ðŸ§ª Newofa â€” mini language</h1>
  <div class="hint">Type plain English â†’ click <b>Go</b> â†’ get <b>Newofa code</b>, a <b>game generator</b>, and the <b>meaning</b> shown on top.</div>

  <div class="box">
    <div class="meaning" id="meaning">Meaning: â€”</div>
    <input id="english" placeholder="Example: make a 2d platformer game with a player and enemies" />
    <br/><br/>
    <button onclick="go()">Go</button>
  </div>

  <div class="row">
    <div class="box">
      <span class="tag">Newofa Code</span>
      <pre id="newofa">// output will appear here</pre>
    </div>
    <div class="box">
      <span class="tag">Generated Game (JS)</span>
      <pre id="game">// game code will appear here</pre>
    </div>
  </div>

<script>
// --- Newofa Language Core ---
// This is a toy language. English is mapped to structured Newofa commands.

function parseEnglish(text) {
  const t = text.toLowerCase();
  const intent = {
    game: t.includes('game'),
    platformer: t.includes('platform'),
    shooter: t.includes('shooter'),
    player: t.includes('player'),
    enemies: t.includes('enemy'),
    score: t.includes('score'),
    physics: t.includes('physics') || t.includes('gravity'),
    dimension: t.includes('3d') ? '3D' : '2D'
  };
  return intent;
}

function toNewofa(intent) {
  let code = [];
  code.push('newofa.start');
  code.push(`world.mode ${intent.dimension}`);

  if (intent.game) code.push('build.game enable');
  if (intent.player) code.push('entity.player spawn');
  if (intent.enemies) code.push('entity.enemy spawn:auto');
  if (intent.platformer) code.push('style.platformer on');
  if (intent.shooter) code.push('style.shooter on');
  if (intent.physics) code.push('physics.gravity 9.8');
  if (intent.score) code.push('ui.score enable');

  code.push('newofa.end');
  return code.join('\n');
}

function meaningFromIntent(intent) {
  let parts = [];
  parts.push(`${intent.dimension} game`);
  if (intent.platformer) parts.push('platformer style');
  if (intent.shooter) parts.push('shooter mechanics');
  if (intent.player) parts.push('player character');
  if (intent.enemies) parts.push('enemies');
  if (intent.physics) parts.push('physics enabled');
  if (intent.score) parts.push('score system');
  return 'Meaning: ' + parts.join(', ');
}

// --- Simple Game Generator (Canvas JS) ---
function generateGameJS(intent) {
  return `// Auto-generated mini game (demo)
const canvas = document.createElement('canvas');
canvas.width = 600;
canvas.height = 400;
document.body.appendChild(canvas);
const ctx = canvas.getContext('2d');

let player = { x:50, y:300, w:30, h:30, vy:0 };
let enemies = ${intent.enemies ? '[{x:400,y:300,w:30,h:30}]' : '[]'};
let gravity = ${intent.physics ? '0.6' : '0'};

function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // player
  player.vy += gravity;
  player.y += player.vy;
  if(player.y > 300){ player.y = 300; player.vy = 0; }
  ctx.fillStyle = 'cyan';
  ctx.fillRect(player.x, player.y, player.w, player.h);

  // enemies
  ctx.fillStyle = 'red';
  enemies.forEach(e => ctx.fillRect(e.x,e.y,e.w,e.h));

  requestAnimationFrame(loop);
}

window.addEventListener('keydown', e => {
  if(e.code === 'Space') player.vy = -10;
});

loop();`;
}

function go() {
  const text = document.getElementById('english').value;
  const intent = parseEnglish(text);

  const newofaCode = toNewofa(intent);
  const meaning = meaningFromIntent(intent);
  const gameCode = generateGameJS(intent);

  document.getElementById('meaning').innerText = meaning;
  document.getElementById('newofa').innerText = newofaCode;
  document.getElementById('game').innerText = gameCode;
}
</script>
</body>
</html>
